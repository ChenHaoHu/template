version: '2'

networks:
  appnet:
    external:
      name: etcds

services:
#  micro:
#    command: micro server & && micro --registry=etcd --registry_address=etcd1:2379 api --handler=rpc
#    image: micro/micro:latest
#    ports:
#      - "8080:8080"
#    networks:
#      - appnet

  api:
    build: ./api/hotel
    command:  --registry=etcd --registry_address=etcd1:2379
    networks:
      - appnet

  auth:
    build: ./srv/auth
    command:  --registry=etcd --registry_address=etcd1:2379
    networks:
      - appnet

  geo:
    build: ./srv/geo
    command:  --registry=etcd --registry_address=etcd1:2379
    networks:
      - appnet

  profile:
    build: ./srv/profile
    command:  --registry=etcd --registry_address=etcd1:2379
    networks:
      - appnet

  rate:
    build: ./srv/rate
    command:  --registry=etcd --registry_address=etcd1:2379
    networks:
      - appnet

